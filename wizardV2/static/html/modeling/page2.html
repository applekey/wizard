

<div id="instructionSection">
	<div style ="margin:20px">
		<p>
			In step 2...
            <br /> 
            
            ...you will remove any unnecessary scan data in order to create a clean model of the residual limb.</p>
		<p>Checklist:</p>
		<ul>
			<li>Use "Plane Cut" to detach desired portion of model and create flat top surface</li>
			<li>Select and remove all remaining unnecessary data</li>
			<li>Remesh model of residual limb to improve mesh quality</li>
			<li>Duplicate model of residual limb, for use in comparison and fit later</li>
		</ul>
            <div class ="subControl">
	<!-- 			step 1 -->
				<div  id="wellText" class="panel panel-default" style="display: none;" >
					<div class="panel-body">
                        <div id="subText1"  class="subText" acceptdisabled=1>
                            <h3>Start Process</h3>
                            <hr>
                            <p>  <p>
                        </div>
                        <div id="subText2" apifunc="createDuplicate()" class="subText" acceptdisabled=0 style="display: none;">
                            <h3>Create Check Point</h3>
                            <hr>
                            <p> This will take the scan and create a duplicate. <p>
                        </div>
                        <div id="subText3"
                             apifunc="$.post('api/accept()',apiReturnParser);"
                             apifuncstart="$.post('api/planeCut()',apiReturnParser);"
                             class="subText" style="display: none;">
                            <div class='questionMarkPlaceHolder' align='right' helppage=''> </div>
                            <h3>Plane Cut </h3>
                            <hr>
                            <p>
                                Using plane cut arrows and camera rotation, align the plane until the edges
                                overlap with the aligned cutlines marked on the residual limb during scanning process
                                Rotate camera to view all sides of the model and make sure the
                                plane overlaps with all cutline marks on all sides
                                When ready press
                            <p>
                        </div>

	                    <div id="subText4"  apiFuncStart="$.post('api/cancel()',apiReturnParser);" class="subText" style="display: none;" acceptDisabled=1>
	                        <h3>Finished </h3>
	                    </div>
	                </div>
	                <div class="panel-footer "> 
                    	<div id="page2TemplateControls"> </div>
                    </div>
                    <script>
                    $( document ).ready(function() {
                      $('#page2TemplateControls').html(Mustache.to_html(subControlTemplate, subControlValuesPage2));
                    });
                    </script>
				</div>


				<a id = "activateButton" class="btn btn-info " role="button" >
					 <span class="glyphicon glyphicon-wrench"></span> Plane Cut
				</a>

				<!-- controls for subinstructions -->
			</div> <!-- subcontrol div -->
			<br>
			<br>
			<p> Now we will do a clean up. </p>
			<div class ="subControl">
	<!-- 			step 1 -->
				<div  id="wellText" class="panel panel-default" style="display: none;" >
					<div class="panel-body">
	                    <div id="subText1" class="subText"  acceptDisabled=1>
	                        <h3>Start Process</h3>
	                    </div>
<!-- 	                    <div id="subText2" apiFuncStart= "shownElement.find('input[type=range]').each(function() { $(this).change()})" class="subText" style="display: none;">
	                        <div id="page3SelectTool"> </div>
	                        <script>
	                        $( document ).ready(function() {
	                          $('#page3SelectTool').html(Mustache.to_html(template, SelectValues));
	                        });
	                         
	                        </script>
	                    </div> -->
	                    <div id="subText2"  apiFuncStart="$.post('api/selectTool(3.2)',apiReturnParser);" class="subText" style="display: none;" acceptDisabled=1>
	                        <h3> Select Tool </h3>
	                        <hr>
	                        <p>?????? smth like click the seelction  </p>
	                        
	                    </div>
						<div id="subText3" apiFunc="$.post('api/expandToConnected()',apiReturnParser);" class="subText" style="display: none;">
							<div class = 'questionMarkPlaceHolder' align = 'right' helpPage= ''> </div>
							<h3>Expand To connected </h3>
							<hr>
							<p> choose the selected area <p>
						</div>
						<div id="subText4" apiFunc=" $.post('api/invertTool()',apiReturnParser);" class="subText" style="display: none;">
							<div class = 'questionMarkPlaceHolder' align = 'right' helpPage= ''> </div>
							<h3>Invert Tool </h3>
							<hr>
							<p> choose the selected area <p>
						</div>
						
						<div id="subText5" apiFunc=" $.post('api/discard()',apiReturnParser);" class="subText" style="display: none;">
							<div class = 'questionMarkPlaceHolder' align = 'right' helpPage= ''> </div>
							<h3>Discard </h3>
							
						</div>
						<div id="subText6" apiFuncStart=" $.post('api/inspector()',apiReturnParser);"
						apiFunc=" $.post('api/repairAll()',apiReturnParser);" class="subText" style="display: none;">
							<div class = 'questionMarkPlaceHolder' align = 'right' helpPage= ''> </div>
							<h3>Inspector </h3>
							
						</div>
	                    
<!-- 	                    apiFunc="$(this).closest('.subControl').find('.subText').filter(':visible').find('input[type=range]').each(function() { $(this).change()})" -->
                        <div id="subText7" apifuncstart="$.post('api/selectAll()',apiReturnParser);"
                             apifunc="callAccept()"
                             class="subText" style="display: none;">

                            <div class='questionMarkPlaceHolder' align='right' helppage=''> </div>
                            <h3>Remesh</h3>
                            <hr>
                            <p> GINGER! press accept apply changes when you are happy, or else when you click next the changes will reverty </p>
                            <div id="page3Remodel"> </div>
                            <script>
                                $(document).ready(function () {
                                    $('#page3Remodel').html(Mustache.to_html(template, RemeshValues));
                                });
                            </script>
                        </div>
                        <div id="subText8" apifuncstart=" $.post('api/cancel()',apiReturnParser);" class="subText" style="display: none;" acceptdisabled=1>
                            <h3>Finished </h3>
                        </div>
	                </div>
	                <div class="panel-footer "> 
	                	<div id="page3TemplateControls"> </div>
	                </div>
                   
                    <script>
                    $( document ).ready(function() {
                      $('#page3TemplateControls').html(Mustache.to_html(subControlTemplate, subControlValuesPage3));
                    });
                    </script>
				</div>


				<a id = "activateButton" class="btn btn-info " role="button" >
					 <span class="glyphicon glyphicon-wrench"></span> Clean Up
				</a>
				

			</div> <!-- subcontrol div -->

		
		</p>
	</div>

</div>
<script>
    function hideOrig(data)
    {
        if (data == false) {
            apiReturnParser(data)
        }
        else {
            $.post("api/hideObjectByName('scan')", apiReturnParser);
        }
    }
    function renameDuplicate(data)
    {
        if (data == false) {
            apiReturnParser(data)
        }
        else {
            $.post("api/renameObjectByName('scan (copy)','residualLimb')", hideOrig);
        }
    }
    function createDuplicate(data)
    {
        if(data ==false)
        {
            apiReturnParser(data)
        }
        else
        {
            $.post("api/duplicate('scan')", renameDuplicate);
        }
    }

</script>