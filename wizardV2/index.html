<!DOCTYPE html>
<html lang="en">
  
  <head>

  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9">
  <meta charset="utf-8">
  <title>
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  
  <script src="js/jquery-2.1.1.min.js"></script>
  <script src="js/bootstrap.min.js"> </script>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,900' rel='stylesheet' type='text/css'>
  <script src="js/jquery-ui.min.js"></script>
  <link href="css/jquery-ui.css" rel="stylesheet">
 

  <script type="text/javascript" src="js/bootstrap-progressbar.min.js"></script>

  <link rel="stylesheet" type="text/css" href="css/bootstrap-progressbar-3.2.0.min.css">
  <link rel="stylesheet" type="text/css" href="css/wowControlBar.css">
  <script type="text/javascript" src="js/subControl.js"></script>
  <script type="text/javascript" src="js/alert.js"></script>
  <script type="text/javascript" src="js/mustache.js"></script>
  <script type="text/javascript" src="js/sliderControl.js"></script>

</head>

<style>
.panel-footer {
    background-color: #E1EFFB;
}

section { 
    -moz-box-shadow: 0 0 5px #888;
    -webkit-box-shadow: 0 0 5px#888;
    box-shadow: 0 0 5px #888;
    background: white;
  
}
#instructionSection
{
  
    margin: 30px;
}
.breadcrumb
{
     background-color: #F0F7FF;
}
.page{
      background-color: #F0F7FF;
}
.well{
  background-color: #E8E8E8;
}

#bookControls {
    z-index: 9999;
    opacity: 0.8;
    filter: alpha(opacity=80);
}
</style>
  
<body id="body">
  <div id= "sampleArea"> </div>
    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- <img src="./icons/uot.jpg" alt="Smiley face" height="42" width="42"> -->
                <a class="navbar-brand" href="#"><b>SEMAPHORE WIZARD</b></a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a id ="scanningSec" onclick= "gotoSection(1)">Scanning</a></li>
                    <li><a id ="modelingSec" onclick= "gotoSection(2)">Modeling</a></li>
                    <li><a id ="printingSec" onclick= "gotoSection(3)">Printing</a></li>
                    <li class="dropdown">
                      <a href="#" id="drop2" role="button" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                      <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
                        <li role="presentation"><a role="menuitem" tabindex="-1" onclick="$.post('api/alignZCam()');">Reset View</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" onclick="$.post('history/loadLatest');">Load Latest Save action</a></li>

<!--                         <li role="presentation" class="divider"></li> -->
<!--                         <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li> -->
                      </ul>
                    </li>
                    <li class="dropdown">
                      <a onclick= "getAllObjects()" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown">All Objects <b class="caret"></b></a>
                      <ul  id="activeObjects" class="dropdown-menu" role="menu" aria-labelledby="drop3">
                       
                      </ul>
                    </li>

                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
    <br />
    <br />


    <div id="Modeling" style=" margin-top: 20px;">
        <!--Scanning-->
        <div  class = "myPage" id="p1"> </div>
        <div  class = "myPage" id="p2" style="display: none;"> </div>
        <div  class = "myPage" id="p3" style="display: none;"> </div>
        <div  class = "myPage" id="p4" style="display: none;"> </div>
        <div  class = "myPage" id="p5" style="display: none;"> </div>
        <div  class = "myPage" id="p6" style="display: none;"> </div>
        <!--Modeling-->
        <div  class = "myPage" id="p7" style="display: none;"> </div>
        <div  class = "myPage" id="p8" style="display: none;"> </div>
        <div  class = "myPage" id="p9" style="display: none;"> </div>
        <div  class = "myPage" id="p10" style="display: none;"> </div>
        <div  class = "myPage" id="p11" style="display: none;"> </div>
        <div  class = "myPage" id="p12" style="display: none;"> </div>
        <div  class = "myPage" id="p13" style="display: none;"> </div>
        <div  class = "myPage" id="p14"style="display: none;" > </div>
        <div  class = "myPage" id="p15"style="display: none;" > </div>
        <!--Printings-->
        <div  class = "myPage" id="p16" style="display: none;"> </div>
        <div  class = "myPage" id="p17"style="display: none;" > </div>
       
    </div>

<br>
    <nav id ="bookControls">
          <ul>
              <li><a id="first" onclick="goToFirstPageOfSection()" title="go first page of section" class="">First page of section</a></li>
              <li><a id="back"  onclick="prevPage()" title="go back one page" class="">Back</a></li>
              <li><a id="next" onclick="nextPage()" title="go foward one page">Next</a></li>
              <li><a id="last" onclick="goToLastPageOfSection()" title="goto last page of section">last page of section</a></li>
          </ul>
      </nav>

<script type="text/javascript">
      String.format = function() {
        // The string containing the format items (e.g. "{0}")
        // will and always has to be the first argument.
        var theString = arguments[0];
        
        // start with the second argument (i = 1)
        for (var i = 1; i < arguments.length; i++) {
            // "gm" = RegEx options for Global search (more than one instance)
            // and for Multiline search
            var regEx = new RegExp("\\{" + (i - 1) + "\\}", "gm");
            theString = theString.replace(regEx, arguments[i]);
        }
        
        return theString;
    }

    function selectObject(objectName)
    {
        console.log(objectName)
        $.post("api/selectObjectByName('"+objectName+"')")
    }


    function getAllObjects()
    {
       $.post("api/getAllObjects()" , function( data ) {
          try {
                  json = $.parseJSON(data);
                  $("#activeObjects").empty();
                  console.log(json)
                  $.each(json, function (index, data) {
                      selectObjectString = String.format("<li><a onclick=selectObject('{0}')>{1}</a></li>",data,data)
                      console.log(selectObjectString) 
                     $("#activeObjects").append(selectObjectString)
                      console.log('index', data)
                  })
              } catch (e) {
                  // not json
              }


        });
    }
   
    function gotoSection(section)
    {
      switch (section) {
          case 1:
              goToPage(1)
              break;
          case 2:
              goToPage(7)
              break;
          case 3:
              goToPage(15)
              break;
      }
    }

    function goToLastPageOfSection()
    {
      var pageToGo = 1;
      if(currentPage<=6 )
      {
        pageToGo= 6;
      }
      else if(currentPage <=14)
      {
        pageToGo = 14;
      }
      else
      {
        pageToGo = 15;
      }
      goToPage(pageToGo)
    }
    function goToFirstPageOfSection()
    {
      var pageToGo = 1;
      if(currentPage<=6 )
      {
        pageToGo= 1;
      }
      else if(currentPage <=14)
      {
        pageToGo = 7;
      }
      else
      {
        pageToGo = 15;
      }
      goToPage(pageToGo)
    }

    function goToPage(page)
    {
      if(subStepCheck() == true)
      {
        return
      }
      if(currentPage == page)
      {
        return;
      }

      $( ".myPage" ).each(function(  ) {
        $(this).hide('fast');
      });
      findID = "#p"+String(page)
      $(findID).show('fast')
      currentPage = page
      location.hash = "#"+currentPage;  
    }

    // $.post("history/check", function (data) {
    //     $(".result").html(data);
    // });
    function subStepCheck()
    {
      if (typeof inSubStep === 'undefined') {
        return false
      }
      else
      {
        if(inSubStep == false)
        {
          return false
        }
        else
        {
          var r = confirm("Do you really want to switch pages?");
          if (r == true) {
              inSubStep = false
              return false
          } else {
              return true
          }
        }
      }
    }

    var currentPage = 1;
    function nextPage()
    {
      if(subStepCheck() == true)
      {
        return
      }
      var numberOfPages = $('.myPage').length
      if(currentPage<numberOfPages)
      {
        currentPage = parseInt(currentPage)+1;
        findID = "#p"+String(currentPage)
        hideId = "#p"+String(currentPage-1)
        $(findID).show('slow')
        $(hideId).hide()
        location.hash = "#"+currentPage;  
      }
    }
    function prevPage()
    {
      if(subStepCheck() == true)
      {
        return
      }
      if(currentPage>1)
      {
        currentPage = currentPage-1;
        findID = "#p"+String(currentPage)
        hideId = "#p"+String(currentPage+1)
        $(findID).show('slow')
        $(hideId).hide()
        location.hash = "#"+currentPage;  
      }
    }


    $(document).ready(function () {
      $( "#p1" ).load( "html/scanning/cover.html" );
      $( "#p2" ).load( "html/scanning/page1.html" );
      $( "#p3" ).load( "html/scanning/page2.html" );
      $( "#p4" ).load( "html/scanning/page3.html" );
      $( "#p5" ).load( "html/scanning/page4.html" );
      $( "#p6" ).load( "html/scanning/end.html" );
      // modeling
      $( "#p7" ).load( "html/modeling/cover.html" );
      $( "#p8" ).load( "html/modeling/page1.html" );
      $( "#p9" ).load( "html/modeling/page2.html" );
      $( "#p10" ).load( "html/modeling/page3.html" );
      $( "#p11" ).load( "html/modeling/page4.html" );
      $( "#p12" ).load( "html/modeling/page5.html" );
      $( "#p13" ).load( "html/modeling/page6.html" );
      $( "#p14" ).load( "html/modeling/end.html" );
      // printing
      $( "#p15" ).load( "html/printing/cover.html" );
      $( "#p16" ).load( "html/printing/end.html" );
      var pageNumber = location.hash;
      if(pageNumber)
      {
        length = pageNumber.length
        pageWithoutHash = pageNumber.substr(1,length-1)
        goToPage(pageWithoutHash)
      }
      $.getScript('js/questionControl.js');

    });

</script>

    

</body>

</html>